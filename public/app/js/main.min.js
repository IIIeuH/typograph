function btnHide(e,t,n,a){e.show(),t.removeClass("hidden"),n.removeClass("hidden"),a.addClass("hidden")}function btnShow(e,t,n,a){e.hide(),n.addClass("hidden"),a.addClass("hidden"),t.removeClass("hidden")}function sandData(e){var t=e.val(),n=[];null!==t?(t.forEach(function(e){var t={};t.name=e,n.push(t)}),n=JSON.stringify(n),$.ajax({type:"PUT",data:{data:n},success:function(e){Snackbar.show({text:"Данные успешно сохраненны!",pos:"bottom-left",actionText:null}),window.location.reload()},error:function(e){Snackbar.show({text:"Что-то пошло не так!",pos:"bottom-left",actionText:null})}})):Snackbar.show({text:"Заполните поле!",pos:"top-center",actionText:"OK",actionTextColor:"#ff0000"})}function removeRow(e){var t=e.attr("id");$.ajax({type:"DELETE",data:{id:t},success:function(){e.parent().parent().hide()},error:function(){Snackbar.show({text:"Что-то пошло не так!",pos:"bottom-left",actionText:null})}})}function searchPassports(e,t){$.each(t,function(){var t=$(this).parent();~$(this).text().indexOf(e)||""===e?t.show():t.hide()})}function addCustomer(){var e=$(".customer-container");e.length<5&&(e.last().after('<div class="col-md-2 customer-container"><select multiple="multiple" class="form-control customerNumber"><option>Заказчик 1</option><option>Заказчик 2</option><option>Заказчик 3</option><option>Заказчик 4</option></select></div>'),$(".customerNumber").select2())}function removeCustomer(){var e=$(".customer-container");e.length>1&&e.last().remove()}function addName(){var e=$(".name-container");e.length<5&&(e.last().after('<div class="col-md-2 name-container"><select multiple="multiple" class="form-control name"><option>Наименование 1</option><option>Наименование 2</option><option>Наименование 3</option><option>Наименование 4</option></select></div>'),$(".name").select2())}function removeName(){var e=$(".name-container");e.length>1&&e.last().remove()}function addCar(){var e=$(".car-container");e.length<8&&e.last().after('<div class="car-container">\n  <table class="table table-bordered table-condensed car-tabel">\n    <tr>\n      <td>\n        <div class="row">\n          <div class="col-md-12">\n            <div class="form-group">\n              <label class="col-md-5 control-label">На машину</label>\n              <div class="col-md-7">\n                <select class="form-control car-select">\n                  <option>A2</option>\n                  <option>A3</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="form-group">\n          <label class="col-md-5 control-label">Шт.</label>\n          <div class="col-md-7">\n            <input type="text" class="form-control Sht"/>\n          </div>\n        </div>\n        <div class="form-group">\n          <label class="col-md-5 control-label">На</label>\n          <div class="col-md-7">\n            <input type="text" class="form-control on"/>\n          </div>\n        </div>\n        <div class="form-group">\n          <label class="col-md-5 control-label">Печ. листов</label>\n          <div class="col-md-7">\n            <input type="text" class="form-control printSheet"/>\n          </div>\n        </div>\n        <div class="form-group">\n          <label class="col-md-5 control-label">Исходных листов</label>\n          <div class="col-md-7">\n            <input type="text" class="form-control allSheet"/>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <textarea cols="30" class="signature"></textarea>\n      </td>\n    </tr>\n  </table>\n</div>')}function sourceSheets(el){var del=el.parents(".car-tabel").find(".on").val().slice("\\")[2]||0,printSheet=eval(el.parents(".car-tabel").find(".printSheet").val())||0;el.parents(".car-tabel").find(".allSheet").val(printSheet/del)}function removeCar(){var e=$(".car-container");e.length>1&&e.last().remove()}$(function(){var e=$(".add-btn"),t=$(".cancel-btn"),n=$(".save-btn"),a=$(".row-papper"),o=$(".removeRow");$(".text").on("select2:select",function(e){var t=e.params.data.element,n=$(t);n.detach(),$(this).append(n),$(this).trigger("change")}),a.hide(),e.click(function(){btnHide(a,t,n,$(this))}),t.click(function(){btnShow(a,e,n,$(this))}),n.click(function(){sandData($("#type-papper"))}),o.click(function(){confirm("Вы действительно хотите удалить "+$(this).data("name")+"?")&&removeRow($(this))})}),$(function(){var e=$("#add-customer"),t=$("#remove-customer"),n=$("#add-name"),a=$("#remove-name"),o=$("#car-add"),l=$("#car-remove"),c=$(".passport-date"),i=$(".passport-id"),r=$("#searchDate"),s=$("#searchId"),d=$('select:not(".car-select")'),p=($("select.mult"),$('select:not(".size-paper")'),window.location);$('ul.nav a[href="'+p+'"]').parent().addClass("active"),$("ul.nav a").filter(function(){return this.href==p}).parent().addClass("active"),$.material.init(),$('input[type="tel"]').mask("+7(999) 999-9999"),d.select2(),$(".size-paper").select2({tags:!0,tokenSeparators:[","," "]}),$("#noFile").click(function(){$(this).prop("checked")?($("#file").attr("disabled","disabled"),$(".fileText").addClass("hidden")):($("#file").removeAttr("disabled"),$(".fileText").removeClass("hidden"))}),$("#typepapper").select2({placeholder:"Тип",ajax:{url:"/getCollection",dataType:"json",data:function(e){return{term:e.term,collection:"typepappers"}},processResults:function(e){return{results:$.map(e,function(e){return{text:e.name,id:e._id}})}}}}),$("#grammpapper").select2({placeholder:"Граммаж",ajax:{url:"/getCollection",dataType:"json",data:function(e){return{term:e.term,collection:"grammpappers"}},processResults:function(e){return{results:$.map(e,function(e){return{text:e.name,id:e._id}})}}}}),$("#sizepapper").select2({placeholder:"Размер",ajax:{url:"/getCollection",dataType:"json",data:function(e){return{term:e.term,collection:"sizepappers"}},processResults:function(e){return{results:$.map(e,function(e){return{text:e.name,id:e._id}})}}}}),e.click(function(){addCustomer()}),t.click(function(){removeCustomer()}),n.click(function(){addName()}),a.click(function(){removeName()});var u=$("#timeCheck"),m=$("#timeInput");u.click(function(){$(this).prop("checked")?m.removeAttr("disabled"):m.attr("disabled","disabled")}),o.click(function(){addCar()}),l.click(function(){removeCar()}),$(document).on("change",".on, .printSheet",function(){sourceSheets($(this))}),$("#file").change(function(){var e=$(this).val(),t=e.split("\\");e=e.replace(t[t.length-1],""),$("#fullPath").html(e)});var h=$('input[name="delivery"]'),v=$(".type-delever"),f=$('input[name="type-delivery"]'),b=$(".bus"),x=$(".delivery-address");b.hide(),x.hide(),v.hide(),h.change(function(){"Доставка"===$('input[name="delivery"]:checked').val()?v.show():(v.hide(),x.hide(),b.hide())}),f.change(function(){"Автобус"===$('input[name="type-delivery"]:checked').val()?(b.show(),x.hide()):(x.show(),b.hide())}),r.keyup(function(){searchPassports($(this).val(),c)}),s.keyup(function(){searchPassports($(this).val(),i)}),"/"===window.location.pathname?$(".chat").show():$(".chat").hide()});