function btnHide(e,t,n,a){e.show(),t.removeClass("hidden"),n.removeClass("hidden"),a.addClass("hidden")}function btnShow(e,t,n,a){e.hide(),n.addClass("hidden"),a.addClass("hidden"),t.removeClass("hidden")}function sandData(e){var t=e.val(),n=[];null!==t?(t.forEach(function(e){var t={};t.name=e,n.push(t)}),n=JSON.stringify(n),$.ajax({type:"PUT",data:{data:n},success:function(e){Snackbar.show({text:"Данные успешно сохраненны!",pos:"bottom-left",actionText:null})},error:function(e){Snackbar.show({text:"Что-то пошло не так!",pos:"bottom-left",actionText:null})}})):Snackbar.show({text:"Заполните поле Граммаж бумаги!",pos:"top-center",actionText:"OK",actionTextColor:"#ff0000"})}function searchPassports(e,t){$.each(t,function(){var t=$(this).parent();~$(this).text().indexOf(e)||""===e?t.show():t.hide()})}function addCustomer(){var e=$(".customer-container");e.length<5&&(e.last().after('<div class="col-md-2 customer-container"><select multiple="multiple" class="form-control customerNumber"><option>Заказчик 1</option><option>Заказчик 2</option><option>Заказчик 3</option><option>Заказчик 4</option></select></div>'),$(".customerNumber").select2())}function removeCustomer(){var e=$(".customer-container");e.length>1&&e.last().remove()}function addName(){var e=$(".name-container");e.length<5&&(e.last().after('<div class="col-md-2 name-container"><select multiple="multiple" class="form-control name"><option>Наименование 1</option><option>Наименование 2</option><option>Наименование 3</option><option>Наименование 4</option></select></div>'),$(".name").select2())}function removeName(){var e=$(".name-container");e.length>1&&e.last().remove()}function addCar(){var e=$(".car-container"),t=e.last().clone();e.length<8&&e.last().after(t)}function removeCar(){var e=$(".car-container");e.length>1&&e.last().remove()}$(function(){var e=$(".add-btn"),t=$(".cancel-btn"),n=$(".save-btn"),a=$(".row-papper");$(".text").on("select2:select",function(e){var t=e.params.data.element,n=$(t);n.detach(),$(this).append(n),$(this).trigger("change")}),a.hide(),e.click(function(){btnHide(a,t,n,$(this))}),t.click(function(){btnShow(a,e,n,$(this))}),n.click(function(){sandData($("#type-papper"))})}),$(function(){var e=$("#add-customer"),t=$("#remove-customer"),n=$("#add-name"),a=$("#remove-name"),o=$("#car-add"),i=$("#car-remove"),c=$(".passport-date"),r=$(".passport-id"),s=$("#searchDate"),l=$("#searchId"),d=$('select:not(".car-select")'),p=($('select:not(".size-paper")'),window.location);$('ul.nav a[href="'+p+'"]').parent().addClass("active"),$("ul.nav a").filter(function(){return this.href==p}).parent().addClass("active"),$.material.init(),$('input[type="tel"]').mask("+7(999) 999-9999"),d.select2(),$(".text").select2({tags:!0,tokenSeparators:[","," "],dropdownCssClass:"select2-hidden"}),$(".size-paper").select2({tags:!0,tokenSeparators:[","," "]}),d.on("select2:select",function(e){var t=e.params.data.element,n=$(t);n.detach(),$(this).append(n),$(this).trigger("change")}),$("#typepapper").select2({ajax:{url:"/getCollection",dataType:"json",data:function(e){return{term:e.term,collection:"typepappers"}},processResults:function(e){return{results:$.map(e,function(e){return{text:e.name,id:e._id}})}}}}),$("#grammpapper").select2({ajax:{url:"/getCollection",dataType:"json",data:function(e){return{term:e.term,collection:"grammpappers"}},processResults:function(e){return{results:$.map(e,function(e){return{text:e.name,id:e._id}})}}}}),e.click(function(){addCustomer()}),t.click(function(){removeCustomer()}),n.click(function(){addName()}),a.click(function(){removeName()});var u=$("#timeCheck"),m=$("#timeInput");u.click(function(){$(this).prop("checked")?m.removeAttr("disabled"):m.attr("disabled","disabled")}),o.click(function(){addCar()}),i.click(function(){removeCar()}),$("#file").change(function(){var e=$(this).val(),t=e.split("\\");e=e.replace(t[t.length-1],""),$("#fullPath").html(e)});var h=$('input[name="delivery"]'),f=$(".type-delever"),v=$('input[name="type-delivery"]'),g=$(".bus"),k=$(".delivery-address");g.hide(),k.hide(),f.hide(),h.change(function(){"Доставка"===$('input[name="delivery"]:checked').val()?f.show():(f.hide(),k.hide(),g.hide())}),v.change(function(){"Автобус"===$('input[name="type-delivery"]:checked').val()?(g.show(),k.hide()):(k.show(),g.hide())}),s.keyup(function(){searchPassports($(this).val(),c)}),l.keyup(function(){searchPassports($(this).val(),r)})});